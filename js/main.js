var canvas = document.getElementById('canvas');

canvas.setAttribute('width',"2000");
canvas.setAttribute('height',"300");

var ctx = canvas.getContext('2d');


var key = ["9049","4697","556","1711","583","1712","581","614","553","612","550","616","553","613","554","1714","581","1712","584","1746","549","1710","584","1739","554","615","552","1709","584","613","558","609","553","1740","554","613","555","610","550","616","553","609","557","613","553","1721","573","1742","552","1713","582","613","554","612","553","614","551","620","547","609","558","611","552","614","551","615","554","611","553","612","552","613","553","611","564","606","553","1711","582","613","553","614","554","612","553","610","556","613","553","620","547","612","553","613","553","612","554","614","552","611","556","611","553","614","552","612","562","605","553","1711","595","601","552","615","551","614","553","612","554","614","552","613","553","613","550","616","552","613","553","614","554","611","552","616","551","612","554","612","550","625","544","613","553","612","552","615","552","614","552","612","554","612","551","616","552","614","560","1704","581","615","551","615","552","1739","556","1741","553","1751","545","1709","584","1712","581","614","553","611","553","615","553","1716","577","615","552","1739","554","614","551","613","554","612","552","611","563","606","552","615","552","1741","553","1713","582","1740","556","1718","575","1741","552","616","551","1697","586"];
var rightKEY = ["9031","4473","614","548","613","545","612","545","613","546","612","545","619","539","611","547","610","548","613","1627","612","1624","615","1625","612","1627","614","1627","613","1623","616","1622","618","1631","607","1626","614","546","612","1622","618","545","613","1624","621","541","610","546","612","545","613","544","614","1624","615","546","612","1630","610","544","613","1622","616","1625","613","1625","616"];

//var data = [100,2133,590,1123]; //脉冲数据，第一个为空闲高电平  x/10
var data = key;

//HIGH y=10, LOW y=20

drawmark();

draw(key,{x:10,y:10});
draw(rightKEY,{x:10,y:70});




function draw(data,loc) {
    ctx.beginPath();
    ctx.lineWidth = 1;
    ctx.strokeStyle = 'rgb(250,0,0)';
    ctx.fillStyle = 'rgb(250,0,0)';

    ctx.moveTo(loc.x,loc.y);

    for (var i = 0; i < data.length; i++) {

        var leng = data[i] / 100;

        if (i % 2 == 1) {
            //空闲状态，高电平
            ctx.lineTo(loc.x, loc.y);

            loc.x += leng;

            ctx.lineTo(loc.x, loc.y);


        } else {
            //脉冲， 低电平
            ctx.lineTo(loc.x, loc.y + 40);

            loc.x += leng;

            ctx.lineTo(loc.x, loc.y + 40);
        }
    }

    ctx.stroke();
    ctx.closePath();
//    ctx.fill();
}


function drawmark(){
    ctx.beginPath();
    ctx.lineWidth = 0.5;
    ctx.strokeStyle = 'rgb(0,0,250)';
    ctx.fillStyle = 'rgb(0,0,250)';

    //引导码
    var f = 10 + 9000/100;
    d(f);

    //结果码
    f +=4500/100;
    d(f);

    //低8位地址码 9-18ms
    f += 9000/100;
    d(f);

    //高8位地址码 9-18ms
    f += 9000/100;
    d(f);

    //8位数据码 9-18ms
    f += 9000/100;
    d(f);

    //8位数据反码 9-18ms
    f += 9000/100;
    d(f);

    ctx.stroke();
    ctx.closePath();

    function d(x){
        ctx.moveTo(x,0);
        ctx.lineTo(x,300);
    }
}